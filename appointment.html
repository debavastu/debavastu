<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Book an Appointment | DebaVastu</title>

<!-- Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

<!-- Icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />

<style>
  body {
    margin: 0;
    background: #eaf2ff;
    font-family: 'Poppins', sans-serif;
    color: #003d8f;
  }

  .header {
    background: #003d8f;
    padding: 15px 0;
    text-align: center;
    color: white;
    font-weight: 600;
    letter-spacing: 0.5px;
  }

  .container {
    max-width: 600px;
    background: rgba(255, 255, 255, 0.9);
    margin: 40px auto;
    padding: 30px;
    border-radius: 12px;
    box-shadow: 0 6px 18px rgba(0,0,0,0.15);
    backdrop-filter: blur(10px);
    border-top: 5px solid #003d8f;
    animation: fadeIn 0.8s ease-in-out;
  }

  h2 {
    text-align: center;
    margin-bottom: 5px;
  }

  p.sub {
    text-align: center;
    font-size: 14px;
    margin-bottom: 25px;
    color: #003060;
  }

  label {
    font-weight: 600;
    font-size: 14px;
  }

  input, select, textarea {
    width: 100%;
    padding: 12px;
    margin-top: 6px;
    margin-bottom: 18px;
    border: 1.5px solid #aac7f3;
    border-radius: 8px;
    font-size: 15px;
  }

  textarea {
    height: 100px;
  }

  .btn {
    width: 100%;
    padding: 14px;
    background: #003d8f;
    color: white;
    font-size: 16px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-weight: 600;
    transition: 0.3s;
  }

  .btn:hover {
    background: #002b60;
    transform: translateY(-2px);
  }

  #whatsappBtn {
    display: block;
    text-align: center;
    color: #00a884;
    margin-top: 15px;
    font-weight: 600;
    font-size: 15px;
    text-decoration: none;
  }

  .error-text {
    color: #e40000;
    font-size: 13px;
    margin-top: -15px;
    margin-bottom: 10px;
    display: none;
  }

  input.error, select.error, textarea.error {
    border-color: #e40000 !important;
  }

  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
  }
</style>

</head>
<body>

<div class="header">Book an Appointment</div>

<div class="container">

  <h2>Fill Your Details</h2>
  <p class="sub">Professional Vastu ‚Ä¢ Astrology ‚Ä¢ Numerology ‚Ä¢ Tarot ‚Ä¢ Healing</p>

  <form id="appointmentForm" action="https://formspree.io/f/mqawnlwo" method="POST" onsubmit="validateForm(event)">

    <label>Full Name</label>
    <input type="text" id="fullName" name="Full Name" />
    <p class="error-text" id="fullNameError">Please enter your name</p>

    <label>Email</label>
    <input type="email" id="email" name="Email" />
    <p class="error-text" id="emailError">Please enter a valid email</p>

    <label>Phone</label>
    <input type="text" id="phone" name="Phone" maxlength="10" />
    <p class="error-text" id="phoneError">Enter 10 digit phone number</p>

    <label>Select Service</label>
    <select id="service" name="Service">
      <option value="">-- Choose --</option>
      <option value="Vastu Consultation">Vastu Consultation</option>
      <option value="Astrological Solutions">Astrological Solutions</option>
      <option value="Numerology Consultation">Numerology Consultation</option>
      <option value="Tarot Reader">Tarot Reader</option>
      <option value="Healing Therapy">Healing Therapy</option>
    </select>
    <p class="error-text" id="serviceError">Please select a service</p>

    <label>Preferred Date</label>
    <input type="date" id="date" name="Preferred Date" />
    <p class="error-text" id="dateError">Please select a valid date</p>

    <label>Preferred Time</label>
    <input type="time" id="time" name="Preferred Time" />
    <p class="error-text" id="timeError">Please select a valid time</p>

    <label>Your Message</label>
    <textarea id="message" name="Message" placeholder="Write your query..."></textarea>

    <button type="submit" class="btn">Book Appointment</button>
  </form>

  <a id="whatsappBtn" href="#">Or message us directly on WhatsApp: +91 6372710439</a>

</div>

<!-- JAVASCRIPT START -->
<script>
// -------------------------------
// Block past dates
// -------------------------------
const dateInput = document.getElementById("date");
const today = new Date().toISOString().split("T")[0];
dateInput.setAttribute("min", today);

// -------------------------------
// Block past times for today
// -------------------------------
const timeInput = document.getElementById("time");

dateInput.addEventListener("change", () => {
  const selected = dateInput.value;
  const now = new Date();

  if (selected === today) {
    let hh = now.getHours().toString().padStart(2, '0');
    let mm = now.getMinutes().toString().padStart(2, '0');
    timeInput.min = `${hh}:${mm}`;
  } else {
    timeInput.min = "00:00";
  }
});

// -------------------------------
// Real-time field validation
// -------------------------------
function showError(id, msg) {
  document.getElementById(id).classList.add("error");
  const err = document.getElementById(id + "Error");
  err.innerText = msg;
  err.style.display = "block";
}

function clearError(id) {
  document.getElementById(id).classList.remove("error");
  document.getElementById(id + "Error").style.display = "none";
}

document.addEventListener("input", (e) => {
  const id = e.target.id;
  if (id === "fullName") clearError("fullName");
  if (id === "email") clearError("email");
  if (id === "phone") clearError("phone");
  if (id === "service") clearError("service");
  if (id === "date") clearError("date");
  if (id === "time") clearError("time");
});

// -------------------------------
// Final validation before submit
// -------------------------------
function validateForm(event) {
  let valid = true;

  const fullName = fullName.value.trim();
  const email = email.value.trim();
  const phone = phone.value.trim();
  const service = service.value.trim();
  const date = dateInput.value;
  const time = timeInput.value;

  if (fullName === "") { showError("fullName", "Full name is required"); valid = false; }
  if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) { showError("email", "Invalid email"); valid = false; }
  if (!/^[0-9]{10}$/.test(phone)) { showError("phone", "Enter 10 digit phone"); valid = false; }
  if (service === "") { showError("service", "Select a service"); valid = false; }
  if (date === "") { showError("date", "Select date"); valid = false; }
  if (time === "") { showError("time", "Select time"); valid = false; }

  if (!valid) event.preventDefault();
}

// -------------------------------
// WhatsApp Auto Fill
// -------------------------------
document.getElementById("whatsappBtn").addEventListener("click", function (e) {
  e.preventDefault();

  const name = document.getElementById("fullName").value;
  const service = document.getElementById("service").value;
  const date = document.getElementById("date").value;
  const time = document.getElementById("time").value;
  const msg = document.getElementById("message").value;

  let text = `Hello, I want to book an appointment.%0A%0A`;
  if (name) text += `üë§ Name: ${name}%0A`;
  if (service) text += `üìå Service: ${service}%0A`;
  if (date) text += `üìÖ Date: ${date}%0A`;
  if (time) text += `‚è∞ Time: ${time}%0A`;
  if (msg) text += `%0Aüí¨ Message: ${msg}%0A`;

  window.open(`https://wa.me/916372710439?text=${text}`, "_blank");
});
</script>

</body>
</html>
